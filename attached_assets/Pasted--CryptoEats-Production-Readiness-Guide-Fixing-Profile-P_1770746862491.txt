# CryptoEats Production Readiness Guide
## Fixing Profile Page & Removing Demo Features for Pilot Launch

**Issue Report Date:** February 10, 2026  
**Target:** Make app fully production-ready for pilot program  
**Location:** Profile page (`app/(tabs)/profile.tsx`)

---

## ðŸš¨ CRITICAL ISSUES TO FIX

Based on your screenshot and requirements, here are the 4 main problems:

### Issue 1: Unable to Log In/Out
**Problem:** No logout button or authentication flow visible  
**Impact:** Users can't sign out or switch accounts

### Issue 2: Payment Methods Not Switchable
**Problem:** Can't select between Visa, Cash App, or Coinbase  
**Impact:** Users stuck with default payment method

### Issue 3: Navigation Links Not Working
**Problem:** Help & Support, Legal & Privacy, Notifications don't open  
**Impact:** Users can't access important information

### Issue 4: Demo Features Still Present
**Problem:** Placeholder/mock data still showing  
**Impact:** Not production-ready for real pilot users

---

## ðŸ› ï¸ COMPLETE FIX IMPLEMENTATION

### Fix 1: Add Logout Functionality

**File:** `app/(tabs)/profile.tsx`

**Add at the top of the file:**

```typescript
import { router } from 'expo-router';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { Alert } from 'react-native';

// Add logout function
const handleLogout = async () => {
  Alert.alert(
    'Log Out',
    'Are you sure you want to log out?',
    [
      {
        text: 'Cancel',
        style: 'cancel',
      },
      {
        text: 'Log Out',
        style: 'destructive',
        onPress: async () => {
          try {
            // Clear stored tokens
            await AsyncStorage.removeItem('authToken');
            await AsyncStorage.removeItem('userId');
            await AsyncStorage.removeItem('userRole');
            
            // Navigate to login screen
            router.replace('/login');
          } catch (error) {
            Alert.alert('Error', 'Failed to log out. Please try again.');
          }
        },
      },
    ]
  );
};
```

**Add logout button in the render:**

```typescript
{/* Add this ABOVE the Payment Methods section */}
<View style={styles.section}>
  <View style={styles.userInfo}>
    <Text style={styles.userName}>{user?.firstName} {user?.lastName}</Text>
    <Text style={styles.userEmail}>{user?.email}</Text>
  </View>
  
  <TouchableOpacity 
    style={styles.logoutButton} 
    onPress={handleLogout}
  >
    <Ionicons name="log-out-outline" size={20} color="#FF4444" />
    <Text style={styles.logoutText}>Log Out</Text>
  </TouchableOpacity>
</View>
```

**Add styles:**

```typescript
const styles = StyleSheet.create({
  // ... existing styles ...
  
  section: {
    backgroundColor: '#1A1E3E',
    marginHorizontal: 16,
    marginTop: 16,
    borderRadius: 12,
    padding: 16,
  },
  
  userInfo: {
    marginBottom: 16,
  },
  
  userName: {
    fontSize: 20,
    fontWeight: '700',
    color: '#FFFFFF',
    marginBottom: 4,
  },
  
  userEmail: {
    fontSize: 14,
    color: '#8B8B8B',
  },
  
  logoutButton: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: 'rgba(255, 68, 68, 0.1)',
    padding: 12,
    borderRadius: 8,
    borderWidth: 1,
    borderColor: '#FF4444',
  },
  
  logoutText: {
    color: '#FF4444',
    fontSize: 16,
    fontWeight: '600',
    marginLeft: 8,
  },
});
```

---

### Fix 2: Make Payment Methods Switchable

**Replace the static payment methods section with this:**

```typescript
import { useState } from 'react';

// Inside your component
const [selectedPaymentMethod, setSelectedPaymentMethod] = useState('visa');

const paymentMethods = [
  {
    id: 'visa',
    icon: 'card-outline',
    title: 'Visa ending 4242',
    subtitle: 'Default',
    enabled: true,
  },
  {
    id: 'cashapp',
    icon: 'cash-outline',
    title: 'Cash App',
    subtitle: '$CryptoEats',
    enabled: true,
  },
  {
    id: 'coinbase',
    icon: 'logo-bitcoin',
    title: 'Coinbase',
    subtitle: 'BTC, ETH, USDC',
    enabled: true,
  },
];

// Render payment methods
<View style={styles.section}>
  <Text style={styles.sectionTitle}>Payment Methods</Text>
  
  {paymentMethods.map((method) => (
    <TouchableOpacity
      key={method.id}
      style={[
        styles.paymentMethod,
        selectedPaymentMethod === method.id && styles.paymentMethodSelected,
      ]}
      onPress={() => {
        setSelectedPaymentMethod(method.id);
        // TODO: Save to backend
        Alert.alert('Payment Method Updated', `${method.title} is now your default payment method.`);
      }}
    >
      <View style={styles.paymentMethodIcon}>
        <Ionicons 
          name={method.icon} 
          size={24} 
          color={selectedPaymentMethod === method.id ? '#00D9A3' : '#FFFFFF'} 
        />
      </View>
      
      <View style={styles.paymentMethodInfo}>
        <Text style={styles.paymentMethodTitle}>{method.title}</Text>
        <Text style={styles.paymentMethodSubtitle}>{method.subtitle}</Text>
      </View>
      
      {selectedPaymentMethod === method.id && (
        <Ionicons name="checkmark-circle" size={24} color="#00D9A3" />
      )}
    </TouchableOpacity>
  ))}
  
  <TouchableOpacity style={styles.addPaymentButton}>
    <Ionicons name="add-circle-outline" size={20} color="#00D9A3" />
    <Text style={styles.addPaymentText}>Add Payment Method</Text>
  </TouchableOpacity>
</View>
```

**Add these styles:**

```typescript
paymentMethod: {
  flexDirection: 'row',
  alignItems: 'center',
  padding: 16,
  backgroundColor: 'rgba(255, 255, 255, 0.05)',
  borderRadius: 12,
  marginBottom: 12,
  borderWidth: 2,
  borderColor: 'transparent',
},

paymentMethodSelected: {
  borderColor: '#00D9A3',
  backgroundColor: 'rgba(0, 217, 163, 0.1)',
},

paymentMethodIcon: {
  width: 48,
  height: 48,
  borderRadius: 24,
  backgroundColor: 'rgba(255, 255, 255, 0.1)',
  alignItems: 'center',
  justifyContent: 'center',
  marginRight: 12,
},

paymentMethodInfo: {
  flex: 1,
},

paymentMethodTitle: {
  fontSize: 16,
  fontWeight: '600',
  color: '#FFFFFF',
  marginBottom: 4,
},

paymentMethodSubtitle: {
  fontSize: 14,
  color: '#8B8B8B',
},

addPaymentButton: {
  flexDirection: 'row',
  alignItems: 'center',
  justifyContent: 'center',
  padding: 16,
  borderRadius: 12,
  borderWidth: 2,
  borderStyle: 'dashed',
  borderColor: '#00D9A3',
},

addPaymentText: {
  fontSize: 16,
  fontWeight: '600',
  color: '#00D9A3',
  marginLeft: 8,
},
```

---

### Fix 3: Make Navigation Links Functional

**Add navigation handlers:**

```typescript
const navigationItems = [
  {
    id: 'help',
    icon: 'help-circle-outline',
    title: 'Help & Support',
    onPress: () => {
      // Navigate to help screen
      router.push('/help-support');
    },
  },
  {
    id: 'legal',
    icon: 'document-text-outline',
    title: 'Legal & Privacy',
    onPress: () => {
      // Navigate to legal screen
      router.push('/legal-privacy');
    },
  },
  {
    id: 'notifications',
    icon: 'notifications-outline',
    title: 'Notifications',
    onPress: () => {
      // Navigate to notifications settings
      router.push('/notification-settings');
    },
  },
];

// Render navigation
<View style={styles.section}>
  {navigationItems.map((item) => (
    <TouchableOpacity
      key={item.id}
      style={styles.menuItem}
      onPress={item.onPress}
    >
      <View style={styles.menuItemLeft}>
        <Ionicons name={item.icon} size={24} color="#FFFFFF" />
        <Text style={styles.menuItemTitle}>{item.title}</Text>
      </View>
      <Ionicons name="chevron-forward" size={24} color="#8B8B8B" />
    </TouchableOpacity>
  ))}
</View>
```

**Add styles:**

```typescript
menuItem: {
  flexDirection: 'row',
  alignItems: 'center',
  justifyContent: 'space-between',
  padding: 16,
  backgroundColor: 'rgba(255, 255, 255, 0.05)',
  borderRadius: 12,
  marginBottom: 12,
},

menuItemLeft: {
  flexDirection: 'row',
  alignItems: 'center',
  flex: 1,
},

menuItemTitle: {
  fontSize: 16,
  fontWeight: '600',
  color: '#FFFFFF',
  marginLeft: 12,
},
```

---

### Fix 4: Create Missing Screens

You need to create these new screens for the navigation to work:

**Create `app/help-support.tsx`:**

```typescript
import { View, Text, ScrollView, TouchableOpacity, Linking } from 'react-native';
import { Stack, router } from 'expo-router';
import { Ionicons } from '@expo/vector-icons';

export default function HelpSupportScreen() {
  const helpItems = [
    {
      title: 'Contact Support',
      subtitle: 'Get help from our team',
      icon: 'chatbubble-outline',
      action: () => Linking.openURL('mailto:support@cryptoeats.net'),
    },
    {
      title: 'FAQs',
      subtitle: 'Common questions answered',
      icon: 'help-circle-outline',
      action: () => router.push('/faq'),
    },
    {
      title: 'Report an Issue',
      subtitle: 'Something not working?',
      icon: 'bug-outline',
      action: () => router.push('/report-issue'),
    },
    {
      title: 'Call Us',
      subtitle: '(305) 555-EATS',
      icon: 'call-outline',
      action: () => Linking.openURL('tel:+13055553287'),
    },
  ];

  return (
    <View style={{ flex: 1, backgroundColor: '#0A0E27' }}>
      <Stack.Screen 
        options={{
          title: 'Help & Support',
          headerStyle: { backgroundColor: '#0A0E27' },
          headerTintColor: '#FFFFFF',
        }} 
      />
      
      <ScrollView style={{ padding: 16 }}>
        {helpItems.map((item, index) => (
          <TouchableOpacity
            key={index}
            style={{
              flexDirection: 'row',
              alignItems: 'center',
              padding: 16,
              backgroundColor: '#1A1E3E',
              borderRadius: 12,
              marginBottom: 12,
            }}
            onPress={item.action}
          >
            <View style={{
              width: 48,
              height: 48,
              borderRadius: 24,
              backgroundColor: 'rgba(0, 217, 163, 0.1)',
              alignItems: 'center',
              justifyContent: 'center',
              marginRight: 12,
            }}>
              <Ionicons name={item.icon} size={24} color="#00D9A3" />
            </View>
            
            <View style={{ flex: 1 }}>
              <Text style={{ fontSize: 16, fontWeight: '600', color: '#FFFFFF', marginBottom: 4 }}>
                {item.title}
              </Text>
              <Text style={{ fontSize: 14, color: '#8B8B8B' }}>
                {item.subtitle}
              </Text>
            </View>
            
            <Ionicons name="chevron-forward" size={24} color="#8B8B8B" />
          </TouchableOpacity>
        ))}
      </ScrollView>
    </View>
  );
}
```

**Create `app/legal-privacy.tsx`:**

```typescript
import { View, Text, ScrollView, TouchableOpacity, Linking } from 'react-native';
import { Stack } from 'expo-router';
import { Ionicons } from '@expo/vector-icons';

export default function LegalPrivacyScreen() {
  const legalItems = [
    {
      title: 'Privacy Policy',
      subtitle: 'How we protect your data',
      url: 'https://cryptoeats.net/privacy',
    },
    {
      title: 'Terms of Service',
      subtitle: 'User agreement',
      url: 'https://cryptoeats.net/terms',
    },
    {
      title: 'Cookie Policy',
      subtitle: 'How we use cookies',
      url: 'https://cryptoeats.net/cookies',
    },
    {
      title: 'Crypto Disclaimer',
      subtitle: 'Important information about crypto payments',
      url: 'https://cryptoeats.net/crypto-disclaimer',
    },
  ];

  return (
    <View style={{ flex: 1, backgroundColor: '#0A0E27' }}>
      <Stack.Screen 
        options={{
          title: 'Legal & Privacy',
          headerStyle: { backgroundColor: '#0A0E27' },
          headerTintColor: '#FFFFFF',
        }} 
      />
      
      <ScrollView style={{ padding: 16 }}>
        {legalItems.map((item, index) => (
          <TouchableOpacity
            key={index}
            style={{
              flexDirection: 'row',
              alignItems: 'center',
              justifyContent: 'space-between',
              padding: 16,
              backgroundColor: '#1A1E3E',
              borderRadius: 12,
              marginBottom: 12,
            }}
            onPress={() => Linking.openURL(item.url)}
          >
            <View style={{ flex: 1 }}>
              <Text style={{ fontSize: 16, fontWeight: '600', color: '#FFFFFF', marginBottom: 4 }}>
                {item.title}
              </Text>
              <Text style={{ fontSize: 14, color: '#8B8B8B' }}>
                {item.subtitle}
              </Text>
            </View>
            
            <Ionicons name="open-outline" size={20} color="#00D9A3" />
          </TouchableOpacity>
        ))}
      </ScrollView>
    </View>
  );
}
```

**Create `app/notification-settings.tsx`:**

```typescript
import { View, Text, ScrollView, Switch } from 'react-native';
import { Stack } from 'expo-router';
import { useState } from 'react';

export default function NotificationSettingsScreen() {
  const [notifications, setNotifications] = useState({
    orderUpdates: true,
    promotions: true,
    driverLocation: true,
    newRestaurants: false,
    weeklyRecap: true,
  });

  const toggleNotification = (key: string) => {
    setNotifications(prev => ({ ...prev, [key]: !prev[key] }));
  };

  const notificationItems = [
    { key: 'orderUpdates', title: 'Order Updates', subtitle: 'Get notified about your order status' },
    { key: 'promotions', title: 'Promotions & Offers', subtitle: 'Special deals and discounts' },
    { key: 'driverLocation', title: 'Driver Location', subtitle: 'Real-time delivery tracking' },
    { key: 'newRestaurants', title: 'New Restaurants', subtitle: 'When new restaurants join' },
    { key: 'weeklyRecap', title: 'Weekly Recap', subtitle: 'Summary of your orders' },
  ];

  return (
    <View style={{ flex: 1, backgroundColor: '#0A0E27' }}>
      <Stack.Screen 
        options={{
          title: 'Notifications',
          headerStyle: { backgroundColor: '#0A0E27' },
          headerTintColor: '#FFFFFF',
        }} 
      />
      
      <ScrollView style={{ padding: 16 }}>
        {notificationItems.map((item) => (
          <View
            key={item.key}
            style={{
              flexDirection: 'row',
              alignItems: 'center',
              justifyContent: 'space-between',
              padding: 16,
              backgroundColor: '#1A1E3E',
              borderRadius: 12,
              marginBottom: 12,
            }}
          >
            <View style={{ flex: 1, marginRight: 12 }}>
              <Text style={{ fontSize: 16, fontWeight: '600', color: '#FFFFFF', marginBottom: 4 }}>
                {item.title}
              </Text>
              <Text style={{ fontSize: 14, color: '#8B8B8B' }}>
                {item.subtitle}
              </Text>
            </View>
            
            <Switch
              value={notifications[item.key]}
              onValueChange={() => toggleNotification(item.key)}
              trackColor={{ false: '#3E3E3E', true: '#00D9A3' }}
              thumbColor={notifications[item.key] ? '#FFFFFF' : '#8B8B8B'}
            />
          </View>
        ))}
      </ScrollView>
    </View>
  );
}
```

---

## ðŸ§¹ REMOVING DEMO FEATURES

### Remove Mock/Demo Data

**Find and replace all instances of:**

1. **Hardcoded test data** â†’ Fetch from real API
2. **Placeholder restaurants** â†’ Load from database
3. **Mock orders** â†’ Real order data only
4. **Test payment methods** â†’ Remove "Visa ending 4242" if it's placeholder

**Example - Replace this:**

```typescript
// âŒ DEMO CODE
const restaurants = [
  { id: 1, name: 'Demo Restaurant', rating: 4.5 },
  // ... hardcoded data
];
```

**With this:**

```typescript
// âœ… PRODUCTION CODE
const { data: restaurants, isLoading } = useQuery({
  queryKey: ['restaurants'],
  queryFn: async () => {
    const res = await fetch(`${API_URL}/api/restaurants`);
    return res.json();
  },
});
```

### Remove Development-Only Features

**In `app.json` or environment config, ensure:**

```json
{
  "expo": {
    "extra": {
      "isDevelopment": false,
      "enableDebugLogs": false,
      "skipOnboarding": false
    }
  }
}
```

### Add Production API Keys

**In `.env` file:**

```bash
# Production API endpoints
EXPO_PUBLIC_API_URL=https://cryptoeats.net/api
EXPO_PUBLIC_DOMAIN=https://cryptoeats.net

# Real Coinbase Commerce keys (NOT test keys)
EXPO_PUBLIC_COINBASE_COMMERCE_KEY=your_production_key_here

# Real Persona API key for KYC
EXPO_PUBLIC_PERSONA_API_KEY=your_production_key_here

# Production Base network
EXPO_PUBLIC_BASE_NETWORK=mainnet

# Disable demo mode
EXPO_PUBLIC_DEMO_MODE=false
```

---

## âœ… PRODUCTION READINESS CHECKLIST

### Profile Page
- [ ] Add logout button with confirmation
- [ ] Make payment methods selectable
- [ ] Create Help & Support screen
- [ ] Create Legal & Privacy screen
- [ ] Create Notification Settings screen
- [ ] Add user info display (name, email)
- [ ] Test all navigation flows

### Remove Demo Features
- [ ] Replace all hardcoded data with API calls
- [ ] Remove mock restaurants/orders
- [ ] Remove placeholder payment methods
- [ ] Set `DEMO_MODE=false` in environment
- [ ] Use production API keys only
- [ ] Remove development-only console.logs
- [ ] Disable debug features

### API Integration
- [ ] All endpoints use production URLs
- [ ] JWT authentication working
- [ ] Real Coinbase Commerce integration
- [ ] Real Persona KYC integration
- [ ] Error handling for all API calls
- [ ] Loading states for all requests

### Security
- [ ] Remove any hardcoded credentials
- [ ] Implement proper token refresh
- [ ] Add request rate limiting
- [ ] Validate all user inputs
- [ ] Sanitize data before display
- [ ] Use HTTPS for all requests

### Testing
- [ ] Test complete signup â†’ order â†’ delivery flow
- [ ] Test all payment methods
- [ ] Test logout and re-login
- [ ] Test error scenarios (no internet, failed payment)
- [ ] Test on real Android device (not emulator)

---

## ðŸš€ DEPLOYMENT STEPS

1. **Update all files** with the code above
2. **Test locally** on Expo Go
3. **Build production APK**:
   ```bash
   eas build --platform android --profile production
   ```
4. **Test APK** on real device
5. **Deploy backend** to production server
6. **Update environment variables** to production values
7. **Launch pilot program** with real users

---

## ðŸ“± FINAL PROFILE PAGE STRUCTURE

After all fixes, your profile page should have:

```
Profile
â”œâ”€â”€ User Info Section
â”‚   â”œâ”€â”€ Name
â”‚   â”œâ”€â”€ Email
â”‚   â””â”€â”€ Logout Button
â”‚
â”œâ”€â”€ Payment Methods
â”‚   â”œâ”€â”€ Visa (selectable)
â”‚   â”œâ”€â”€ Cash App (selectable)
â”‚   â”œâ”€â”€ Coinbase (selectable)
â”‚   â””â”€â”€ Add Payment Method button
â”‚
â”œâ”€â”€ Settings Menu
â”‚   â”œâ”€â”€ Help & Support (opens screen)
â”‚   â”œâ”€â”€ Legal & Privacy (opens screen)
â”‚   â””â”€â”€ Notifications (opens screen)
â”‚
â””â”€â”€ App Version & Build Info
```

---

## ðŸŽ¯ PRIORITY ORDER

**Do these first (critical for pilot):**
1. âœ… Add logout functionality
2. âœ… Make payment methods switchable
3. âœ… Create Help & Support screen
4. âœ… Remove all demo data

**Do these next (important):**
5. Create Legal & Privacy screen
6. Create Notification Settings screen
7. Test complete user flow
8. Build production APK

**Do these last (polish):**
9. Add analytics tracking
10. Optimize performance
11. Add error monitoring (Sentry)

---

This guide fixes all 4 issues you identified and makes your app production-ready for the pilot program. Copy the code examples into your React Native app and test thoroughly before building the final APK.

**Need help implementing any specific part?** Let me know which fix you want to start with!
